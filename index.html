<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>El Canicilier</title>

<!-- Fuentes -->
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Bitter:wght@400;700;800;900&display=swap" rel="stylesheet">

<style>
    body {
        margin: 0;
        padding: 0;
        background: #ffffff;
        color: #111;
        font-family: "Bitter", serif;
    }

    /* ------------------- MENÚ SUPERIOR ------------------- */

    .menu-bar {
        display: flex;
        align-items: center;
        padding: 15px;
        border-bottom: 1px solid #eee;
    }

    .hamburger {
        font-size: 28px;
        cursor: pointer;
        padding: 0 10px;
    }

    .logo-mobile {
        margin: 0 auto;
        font-family: "Montserrat", sans-serif;
        font-size: 34px;
        font-weight: 700;
        color: #EACB26;
    }

    /* ------------------- BARRA AMARILLA ------------------- */

    .top-bar {
        background: #EACB26;
        padding: 10px 20px;
        text-align: center;
        font-family: "Montserrat", sans-serif;
        font-size: 14px;
    }

    /* ------------------- GRID DESKTOP ------------------- */

    .layout {
        max-width: 1200px;
        margin: 20px auto;
        display: grid;
        grid-template-columns: 2fr 1fr 1fr;
        gap: 30px;
        padding: 0 20px;
    }

    /* ------------------- NOTICIA PRINCIPAL ------------------- */

    .main-news img {
        width: 100%;
        height: 380px;
        object-fit: cover;
        border-radius: 4px;
    }

    .main-news h1 {
        font-family: "Bitter", serif;
        font-size: 44px;
        font-weight: 800;
        line-height: 1.1;
        margin-block: 20px 10px;
        letter-spacing: -0.5px;
    }

    /* ------------------- NOTICIAS LATERALES ------------------- */

    .side-news {
        display: flex;
        flex-direction: column;
        gap: 20px;
    }

    .side-item img {
        width: 100%;
        height: 180px;
        object-fit: cover;
        border-radius: 4px;
    }

    .side-item h2 {
        font-family: "Bitter", serif;
        font-size: 26px;
        font-weight: 800;
        line-height: 1.15;
    }

    /* ------------------- FEED INFERIOR ------------------- */

    .feed {
        max-width: 1200px;
        margin: 40px auto;
        padding: 0 20px;
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
        gap: 25px;
    }

    .feed-item img {
        width: 100%;
        height: 200px;
        object-fit: cover;
    }

    .feed-item h3 {
        font-family: "Bitter", serif;
        font-size: 22px;
        font-weight: 800;
    }

    /* ------------------- HOVER CLICKEABLE ------------------- */

    .news-item:hover h1,
    .news-item:hover h2,
    .news-item:hover h3 {
        text-decoration: underline;
        cursor: pointer;
    }

    /* ------------------- MOBILE ------------------- */

    @media (max-width: 900px) {
        .layout {
            grid-template-columns: 1fr 1fr;
        }
        .main-news h1 { font-size: 36px; }
    }

    @media (max-width: 600px) {
        .layout {
            grid-template-columns: 1fr;
        }
        .main-news img {
            height: 260px;
        }
        .main-news h1 {
            font-size: 32px;
            line-height: 1.15;
        }
        .side-item h2 {
            font-size: 22px;
        }
        .feed {
            grid-template-columns: 1fr;
        }
    }

</style>
</head>
<body>

<!-- MENÚ SUPERIOR MOBILE -->
<div class="menu-bar">
    <div class="hamburger">☰</div>
    <div class="logo-mobile">elCanicilier</div>
</div>

<!-- BARRA AMARILLA -->
<div class="top-bar" id="fecha-hoy"></div>

<!-- CONTENIDO PRINCIPAL -->
<div class="layout" id="main-layout"></div>

<!-- FEED INFERIOR -->
<div class="feed" id="feed-container"></div>

<script>
// Fecha dinámica
const fechaSpan = document.getElementById("fecha-hoy");
const hoy = new Date();
const opciones = { weekday:'long', year:'numeric', month:'long', day:'numeric' };
fechaSpan.textContent = hoy.toLocaleDateString('es-ES', opciones);

// Noticias desde Google Sheets
const sheetId = "1ocZG8kFq8j2sZtg_5k3ZCr8zy0TnkfkXCFOiFV1qLL4";
const sheetUrl = `https://docs.google.com/spreadsheets/d/${sheetId}/gviz/tq?tqx=out:json`;

fetch(sheetUrl)
  .then(res => res.text())
  .then(text => {
      const json = JSON.parse(text.substring(47, text.length - 2));
      const rows = json.table.rows;

      const mainLayout = document.getElementById("main-layout");
      const feed = document.getElementById("feed-container");

      // Noticia principal
      mainLayout.innerHTML = `
          <div class="main-news news-item">
              <img src="${rows[0].c[1].v}">
              <h1>${rows[0].c[0].v}</h1>
          </div>
      `;

      // Noticias laterales
      let sideHTML = "";
      for (let i = 1; i <= 2 && i < rows.length; i++) {
          sideHTML += `
             <div class="side-item news-item">
                <img src="${rows[i].c[1].v}">
                <h2>${rows[i].c[0].v}</h2>
             </div>
          `;
      }

      mainLayout.innerHTML += `
          <div class="side-news">${sideHTML}</div>
          <div class="side-news"></div>
      `;

      // Feed inferior
      for (let i = 3; i < rows.length; i++) {
          feed.innerHTML += `
              <div class="feed-item news-item">
                  <img src="${rows[i].c[1].v}">
                  <h3>${rows[i].c[0].v}</h3>
              </div>
          `;
      }
  });
</script>

</body>
</html>
