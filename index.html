<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>El Canicilier</title>

<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Bitter:wght@400;700;800;900&display=swap" rel="stylesheet">

<style>
    body { margin:0; padding:0; font-family:"Bitter",serif; }

    /* HEADER FIJO */
    .sticky-header {
        position: sticky;
        top: 0;
        background: #fff;
        z-index: 999;
        border-bottom: 1px solid #eee;
        transform-origin: top;
    }

    .header-top {
        display:flex;
        justify-content:space-between;
        align-items:center;
        padding:12px 20px;
    }

    .header-logo {
        font-family:"Montserrat",sans-serif;
        font-size:46px;
        font-weight:700;
        color:#EACB26;
    }

    .weather-box {
        font-family:"Montserrat",sans-serif;
        font-size:16px;
        color:#444;
        display:flex;
        align-items:center;
        gap:6px;
    }

    /* BARRA AMARILLA */
    .top-bar {
        background:#EACB26;
        padding:10px 20px;
        display:flex;
        align-items:center;
        justify-content:space-between;
        font-family:"Montserrat",sans-serif;
        font-size:15px;
    }

    .top-left { display:flex; gap:25px; align-items:center; }
    .top-right { display:flex; gap:20px; font-size:20px; }

    .social-icon { opacity:0.9; cursor:pointer; }
    .social-icon:hover { opacity:1; }

    /* GRID */
    .layout {
        max-width: 1200px;
        margin: 20px auto;
        display: grid;
        grid-template-columns: 2fr 1fr 1fr;
        gap: 30px;
        padding: 0 20px;
    }

    .main-news img { width:100%; height:380px; object-fit:cover; border-radius:4px; }
    .main-news h1 { font-size:44px; font-weight:800; margin:20px 0 10px; }

    .side-news { display:flex; flex-direction:column; gap:20px; }
    .side-item img { width:100%; height:180px; object-fit:cover; border-radius:4px; }
    .side-item h2 { font-size:26px; font-weight:800; }

    /* FEED */
    .feed {
        max-width:1200px;
        margin:40px auto;
        padding:0 20px;
        display:grid;
        grid-template-columns:repeat(auto-fill,minmax(280px,1fr));
        gap:25px;
    }

    .feed-item img { width:100%; height:200px; object-fit:cover; }
    .feed-item h3 { font-size:22px; font-weight:800; }

    /* HOVER */
    .news-item:hover h1,
    .news-item:hover h2,
    .news-item:hover h3 { text-decoration:underline; cursor:pointer; }

    /* TABLET */
    @media (max-width: 900px){
        .layout{ grid-template-columns:1fr; }
        .main-news h1{ font-size:38px; }
    }

    /* MOBILE â€“ SIEMPRE UNA NOTICIA POR FILA */
    @media (max-width: 750px){
        .layout{
            grid-template-columns: 1fr !important;
        }
        .side-news{
            flex-direction: column;
            width: 100%;
        }
        .feed{
            grid-template-columns: 1fr !important;
        }
        .main-news img{
            height: 250px;
        }
        .main-news h1{
            font-size: 30px;
        }
        .side-item h2{
            font-size: 22px;
        }
    }
</style>
</head>
<body>

<div class="sticky-header">
    <div class="header-top">
        <div style="font-size:28px;cursor:pointer;">â˜°</div>
        <div class="header-logo">elCanicilier</div>
        <div class="weather-box" id="weather-box">â›… <span id="temp"></span>Â°C Buenos Aires</div>
    </div>
</div>

<div class="top-bar">
    <div class="top-left">
        <div id="fecha-hoy"></div>
        <div id="dolar-info">Cargando dÃ³lar...</div>
    </div>

    <div class="top-right">
        <div class="social-icon">ðŸ“˜</div>
        <div class="social-icon">âœ–</div>
        <div class="social-icon">ðŸ“¸</div>
        <div class="social-icon">ðŸŽµ</div>
    </div>
</div>

<div class="layout" id="main-layout"></div>
<div class="feed" id="feed-container"></div>

<script>
// Fecha
const fechaSpan = document.getElementById("fecha-hoy");
fechaSpan.textContent = new Date().toLocaleDateString('es-ES', { weekday:'long', year:'numeric', month:'long', day:'numeric' });

// Clima
fetch("https://api.open-meteo.com/v1/forecast?latitude=-34.60&longitude=-58.38&current_weather=true")
  .then(r=>r.json()).then(d=>{
      document.getElementById("temp").textContent = Math.round(d.current_weather.temperature);
  });

// DÃ³lar
fetch("https://api.bluelytics.com.ar/v2/latest")
  .then(r=>r.json()).then(d=>{
      document.getElementById("dolar-info").innerHTML =
        `DÃ³lar: BNA $${d.oficial.value_buy} / $${d.oficial.value_sell} Â· Blue $${d.blue.value_buy} / $${d.blue.value_sell}`;
  });

// Noticias
const sheetId="1ocZG8kFq8j2sZtg_5k3ZCr8zy0TnkfkXCFOiFV1qLL4";
const sheetUrl=`https://docs.google.com/spreadsheets/d/${sheetId}/gviz/tq?tqx=out:json`;

fetch(sheetUrl).then(r=>r.text()).then(t=>{
    const json=JSON.parse(t.substring(47,t.length-2));
    const rows=json.table.rows;

    const main=document.getElementById("main-layout");
    const feed=document.getElementById("feed-container");

    main.innerHTML = `
        <div class="main-news news-item">
            <img src="${rows[0].c[1].v}">
            <h1>${rows[0].c[0].v}</h1>
        </div>
    `;

    let sideHTML="";
    for(let i=1;i<=2&&i<rows.length;i++){
        sideHTML+=`
            <div class="side-item news-item">
                <img src="${rows[i].c[1].v}">
                <h2>${rows[i].c[0].v}</h2>
            </div>`;
    }

    main.innerHTML+=`<div class="side-news">${sideHTML}</div><div class="side-news"></div>`;

    for(let i=3;i<rows.length;i++){
        feed.innerHTML+=`
            <div class="feed-item news-item">
                <img src="${rows[i].c[1].v}">
                <h3>${rows[i].c[0].v}</h3>
            </div>`;
    }
});
</script>

</body>
</html>

